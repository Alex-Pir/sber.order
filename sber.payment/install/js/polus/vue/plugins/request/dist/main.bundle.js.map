{"version":3,"file":"main.bundle.js","sources":["../src/request.js"],"sourcesContent":["\"use strict\"\n\nimport {Vue} from \"ui.vue\";\n\nlet Request = function() {\n    this.data = null;\n    this.signedParameters = null;\n    this.options = null;\n    this.url = null;\n};\n\nRequest.prototype.setSignedParameters = function(parameters) {\n    this.signedParameters = parameters;\n    return this;\n}\n\nRequest.prototype.setData = function(data) {\n    this.data = data;\n    return this;\n}\n\nRequest.prototype.setOptions = function(options) {\n    this.options = options;\n    return this;\n}\n\nRequest.prototype.setUrl = function(url) {\n    this.url = url;\n    return this;\n}\n\nRequest.prototype.send = function(componentMethod = null) {\n    let url = this.url;\n    let data = this.data;\n\n    return new Promise((resolve, reject) => {\n        let result = componentMethod !== null\n            ? this.sendToComponent(url, data, componentMethod)\n            : this.sendToModule(url, data);\n\n        result.then(response => {\n            if (response.status === \"success\" && response.hasOwnProperty(\"data\")) {\n                resolve(response.data);\n            } else {\n                reject(response);\n            }\n        })\n        .catch(error => {\n            if (error.hasOwnProperty(\"errors\")) {\n                let resultMessage = [];\n                const errors = error.errors;\n\n                for (let i in errors) {\n                    resultMessage.push(errors[i].message);\n                }\n\n                reject(resultMessage.join('</br>'));\n            } else {\n                reject(error);\n            }\n        });\n    });\n}\n\nRequest.prototype.sendToModule = function(url, data) {\n    return BX.ajax.runAction(\n        url,\n        {\n            data: data,\n            preparePost: true,\n            enctype: 'multipart/form-data'\n        }\n    );\n}\n\nRequest.prototype.sendToComponent = function(url, data, componentMethod) {\n    return BX.ajax.runComponentAction(\n        url,\n        componentMethod,\n        {\n            data: data,\n            mode: 'class',\n            //enctype: 'multipart/form-data',\n            signedParameters: this.signedParameters\n        }\n    );\n}\n\nRequest.install = function(Vue, options) {\n    Vue.prototype.$request = new Request();\n}\n\nVue.use(Request);\n\nexport default Request;"],"names":["Request","data","signedParameters","options","url","prototype","setSignedParameters","parameters","setData","setOptions","setUrl","send","componentMethod","Promise","resolve","reject","result","_this","sendToModule","sendToComponent","then","response","status","hasOwnProperty","error","resultMessage","errors","i","push","message","join","BX","ajax","runAction","preparePost","enctype","runComponentAction","mode","install","Vue","$request","use"],"mappings":"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"}